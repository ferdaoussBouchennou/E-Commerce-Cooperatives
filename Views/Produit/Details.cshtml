@using E_Commerce_Cooperatives.Models
@{
    ViewBag.Title = "Détails du produit - Cooporia";
    var produit = ViewBag.Produit as Produit;
    var produitsSimilaires = ViewBag.ProduitsSimilaires as List<Produit> ?? new List<Produit>();
    
    if (produit == null)
    {
        Response.Redirect(Url.Action("Index", "Catalogue"));
        return;
    }
    
    var images = produit.Images?.ToList() ?? new List<ImageProduit>();
    if (!images.Any() && !string.IsNullOrEmpty(produit.ImageUrl))
    {
        images.Add(new ImageProduit { UrlImage = produit.ImageUrl, EstPrincipale = true });
    }
    
    // Correction des chemins d'images (si seulement le nom de fichier est stocké)
    foreach (var img in images)
    {
        if (!string.IsNullOrEmpty(img.UrlImage) && !img.UrlImage.StartsWith("~") && !img.UrlImage.StartsWith("/"))
        {
            img.UrlImage = "~/Content/images/produits/" + img.UrlImage;
        }
    }

    if (!images.Any())
    {
        images.Add(new ImageProduit { UrlImage = "~/Content/images/default-product.jpg", EstPrincipale = true });
    }
    
    var variantes = produit.Variantes?.ToList() ?? new List<Variante>();
    var avis = produit.Avis?.ToList() ?? new List<AvisProduit>();
    var baseVariant = variantes.FirstOrDefault(v => v.PrixSupplementaire == 0) ?? variantes.FirstOrDefault();
}

@Html.Partial("_Header")

<main class="py-5" style="background-color: #F5F3EF;">
    <div class="container">
        <!-- Breadcrumb -->
        <nav aria-label="breadcrumb" class="mb-4">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="@Url.Action("Index", "Home")" style="color: #305C7D;">Accueil</a></li>
                <li class="breadcrumb-item"><a href="@Url.Action("Index", "Catalogue")" style="color: #305C7D;">Catalogue</a></li>
                @if (produit.Categorie != null)
                {
                    <li class="breadcrumb-item"><a href="@Url.Action("Index", "Catalogue", new { categorie = produit.CategorieId })" style="color: #305C7D;">@produit.Categorie.Nom</a></li>
                }
                <li class="breadcrumb-item active" aria-current="page">@produit.Nom</li>
            </ol>
        </nav>

        <div class="row g-5">
            <!-- Image Gallery -->
            <div class="col-lg-6">
                <div class="product-gallery">
                    <!-- Main Image -->
                    <div class="position-relative mb-3 rounded-3 overflow-hidden" style="aspect-ratio: 1/1; background-color: white;">
                        <img id="main-product-image" 
                             src="@Url.Content(images[0].UrlImage)" 
                             alt="@produit.Nom" 
                             class="w-100 h-100 object-fit-cover cursor-pointer"
                             style="cursor: zoom-in;"
                             onclick="openImageModal(this.src)">
                        @if (produit.EstNouveau)
                        {
                            <span class="badge position-absolute top-0 start-0 m-3" style="background-color: #7D8453; color: white; font-size: 0.875rem;">
                                Nouveau
                            </span>
                        }
                        @if (produit.EstEnVedette)
                        {
                            <span class="badge position-absolute top-0 start-0 m-3" style="background-color: #305C7D; color: white; font-size: 0.875rem; @(produit.EstNouveau ? "margin-top: 3.5rem !important;" : "")">
                                Vedette
                            </span>
                        }
                    </div>
                    
                    <!-- Thumbnail Images -->
                    @if (images.Count > 1)
                    {
                        <div class="d-flex gap-2 flex-wrap">
                            @foreach (var img in images)
                            {
                                <div class="thumbnail-image position-relative rounded overflow-hidden" 
                                     style="width: 80px; height: 80px; cursor: pointer; border: 2px solid transparent; transition: border-color 0.3s;"
                                     onclick="changeMainImage('@img.UrlImage', this)">
                                    <img src="@Url.Content(img.UrlImage)" 
                                         alt="@produit.Nom" 
                                         class="w-100 h-100 object-fit-cover"
                                         onerror="this.onerror=null;this.src='@Url.Content("~/Content/images/default-product.jpg")';">
                                </div>
                            }
                        </div>
                    }
                </div>
            </div>

            <!-- Product Info -->
            <div class="col-lg-6">
                <!-- Category -->
                @if (produit.Categorie != null)
                {
                    <p class="text-uppercase small mb-2" style="color: #C06C50; letter-spacing: 1px; font-weight: 500;">
                        @produit.Categorie.Nom
                    </p>
                }

                <!-- Title -->
                <h1 class="display-5 fw-bold mb-3" style="color: #2d3748;">
                    @produit.Nom
                </h1>

                <!-- Rating -->
                @if (produit.NombreAvis > 0)
                {
                    <div class="d-flex align-items-center gap-2 mb-3">
                        <div class="d-flex">
                            @for (int i = 0; i < 5; i++)
                            {
                                if (i < Math.Floor(produit.NoteMoyenne))
                                {
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="#ffc107" viewBox="0 0 16 16">
                                        <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
                                    </svg>
                                }
                                else
                                {
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="#e0e0e0" viewBox="0 0 16 16">
                                        <path d="M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z"/>
                                    </svg>
                                }
                            }
                        </div>
                        <span class="fw-semibold" style="color: #2d3748;">
                            @produit.NoteMoyenne.ToString("F1")
                        </span>
                        <span class="text-muted">
                            (@produit.NombreAvis avis)
                        </span>
                    </div>
                }

                <!-- Price -->
                <div class="mb-4">
                    <span class="display-6 fw-bold" style="color: #305C7D;">
                        <span id="product-price">@(baseVariant != null ? (produit.PrixTTC + baseVariant.PrixSupplementaireTTC).ToString("F2") : produit.PrixTTC.ToString("F2"))</span> MAD
                    </span>
                    @if (variantes.Any() && variantes.Any(v => v.PrixSupplementaire > 0))
                    {
                        <span class="text-muted ms-2">et plus</span>
                    }
                </div>

                <!-- Description -->
                @if (!string.IsNullOrEmpty(produit.Description))
                {
                    <div class="mb-4">
                        <h3 class="h5 fw-semibold mb-2" style="color: #2d3748;">Description</h3>
                        <p class="text-muted" style="line-height: 1.8;">
                            @produit.Description
                        </p>
                    </div>
                }

                <!-- Cooperative Info -->
                @if (produit.Cooperative != null)
                {
                    <div class="bg-white rounded-3 p-4 mb-4" style="border: 1px solid #e0e0e0;">
                        <h3 class="h6 fw-semibold mb-3" style="color: #2d3748;">Coopérative</h3>
                        <p class="fw-semibold mb-2" style="color: #305C7D; font-size: 1.1rem;">
                            @produit.Cooperative.Nom
                        </p>
                        @if (!string.IsNullOrEmpty(produit.Cooperative.Description))
                        {
                            <p class="text-muted small mb-2">
                                @produit.Cooperative.Description
                            </p>
                        }
                        <div class="mt-3">
                            @if (!string.IsNullOrEmpty(produit.Cooperative.Ville))
                            {
                                <div class="d-flex align-items-start gap-2 mb-2 text-muted small">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#305C7D" class="bi bi-geo-alt-fill mt-1" viewBox="0 0 16 16" style="flex-shrink: 0;">
                                        <path d="M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10m0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6"/>
                                    </svg>
                                    <div>
                                        <span class="fw-medium">@produit.Cooperative.Ville</span>
                                        @if (!string.IsNullOrEmpty(produit.Cooperative.Adresse))
                                        {
                                            <br /><span class="opacity-75">@produit.Cooperative.Adresse</span>
                                        }
                                    </div>
                                </div>
                            }
                            @if (!string.IsNullOrEmpty(produit.Cooperative.Telephone))
                            {
                                <div class="d-flex align-items-center gap-2 text-muted small">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#305C7D" class="bi bi-telephone-fill" viewBox="0 0 16 16" style="flex-shrink: 0;">
                                        <path fill-rule="evenodd" d="M1.885.511a1.745 1.745 0 0 1 2.61.163L6.29 2.98c.329.423.445.974.315 1.494l-.547 2.19a.678.678 0 0 0 .178.643l2.457 2.457a.678.678 0 0 0 .644.178l2.189-.547a1.745 1.745 0 0 1 1.494.315l2.306 1.794c.829.645.905 1.87.163 2.611l-1.034 1.034c-.74.74-1.846 1.065-2.877.702a18.6 18.6 0 0 1-7.01-4.42 18.6 18.6 0 0 1-4.42-7.009c-.362-1.03-.037-2.137.703-2.877z"/>
                                    </svg>
                                    <a href="tel:@produit.Cooperative.Telephone.Replace(" ", "")" class="text-muted text-decoration-none">@produit.Cooperative.Telephone</a>
                                </div>
                            }
                        </div>
                    </div>
                }

                <!-- Variants -->
                @if (variantes.Any())
                {
                    <div class="mb-4">
                        <h3 class="h6 fw-semibold mb-3" style="color: #2d3748;">
                            @(variantes.First().Taille != null ? "Taille" : "Variante")
                        </h3>
                        <div class="d-flex flex-wrap gap-2" id="variants-container">
                            @foreach (var variant in variantes)
                            {
                                var variantPriceTTC = produit.PrixTTC + variant.PrixSupplementaireTTC;
                                <button type="button" 
                                        class="btn variant-btn @(variant == baseVariant ? "active" : "")"
                                        data-variant-id="@variant.VarianteId"
                                        data-variant-price="@variantPriceTTC"
                                        data-variant-stock="@variant.Stock"
                                        style="border: 2px solid @(variant == baseVariant ? "#C06C50" : "#e0e0e0"); background-color: @(variant == baseVariant ? "#F5F3EF" : "white"); color: #2d3748; transition: all 0.3s;"
                                        onclick="selectVariant(this, @variant.VarianteId, '@variantPriceTTC.ToString("F2", System.Globalization.CultureInfo.InvariantCulture)', @variant.Stock)">
                                    @(variant.Taille ?? variant.Couleur ?? "Standard")
                                    @if (variant.PrixSupplementaire > 0)
                                    {
                                        <span class="small ms-1">(+@variant.PrixSupplementaireTTC.ToString("F2") MAD)</span>
                                    }
                                    @if (variant.Stock == 0)
                                    {
                                        <span class="badge bg-danger ms-2">Épuisé</span>
                                    }
                                </button>
                            }
                        </div>
                    </div>
                }

                <!-- Quantity & Stock -->
                <div class="mb-4">
                    <h3 class="h6 fw-semibold mb-3" style="color: #2d3748;">Quantité</h3>
                    <div class="d-flex align-items-center gap-3">
                        <div class="d-flex align-items-center border rounded" style="border-color: #e0e0e0 !important;">
                            <button type="button" 
                                    class="btn border-0 bg-transparent px-3 py-2" 
                                    onclick="decreaseQuantity()"
                                    id="decrease-btn">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                                    <path d="M4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8"/>
                                </svg>
                            </button>
                            <span class="px-4 py-2 fw-semibold" id="quantity-display" style="min-width: 50px; text-align: center;">1</span>
                            <button type="button" 
                                    class="btn border-0 bg-transparent px-3 py-2" 
                                    onclick="increaseQuantity()"
                                    id="increase-btn">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                                    <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"/>
                                </svg>
                            </button>
                        </div>
                        <span class="text-muted small" id="stock-info">
                            @(baseVariant != null ? baseVariant.Stock : (variantes.Any() ? variantes.First().Stock : produit.StockTotal)) en stock
                        </span>
                    </div>
                </div>

                <!-- Actions -->
                <div class="d-flex gap-3 mb-4">
                    <button type="button" 
                            class="btn btn-lg flex-grow-1" 
                            id="add-to-cart-btn"
                            style="background-color: #C06C50; color: white; border: none;"
                            onclick="addToCart()">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-cart-plus me-2" viewBox="0 0 16 16">
                            <path d="M9 5.5a.5.5 0 0 0-1 0V7H6.5a.5.5 0 0 0 0 1H8v1.5a.5.5 0 0 0 1 0V8h1.5a.5.5 0 0 0 0-1H9V5.5z"/>
                            <path d="M.5 1a.5.5 0 0 0 0 1h1.11l.401 1.607 1.498 7.985A.5.5 0 0 0 4 12h1a2 2 0 1 0 0 4 2 2 0 0 0 0-4h7a2 2 0 1 0 0 4 2 2 0 0 0 0-4h1a.5.5 0 0 0 .491-.408l1.5-8A.5.5 0 0 0 14.5 3H2.89l-.405-1.621A.5.5 0 0 0 2 1H.5zm3.915 10L3.102 4h10.796l-1.313 7h-8.17zM6 14a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm7 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/>
                        </svg>
                        Ajouter au panier
                    </button>
                    <button type="button" 
                            class="btn btn-lg btn-outline-light d-flex align-items-center justify-content-center favori-toggle-btn" 
                            data-produit-id="@produit.ProduitId"
                            onclick="toggleFavori(event, @produit.ProduitId, this)"
                            style="width: 56px; border: 1px solid #e0e0e0; color: #305C7D;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-heart" viewBox="0 0 16 16">
                            <path d="m8 2.748-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01L8 2.748zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143c.06.055.119.112.176.171a3.12 3.12 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15z"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- Reviews Section -->
        @if (avis.Any())
        {
            <section class="mt-5 pt-5 border-top">
                <h2 class="h3 fw-bold mb-4" style="color: #2d3748;">
                    Avis clients (@avis.Count)
                </h2>
                <div class="row g-4">
                    @foreach (var review in avis)
                    {
                        <div class="col-md-6">
                            <div class="bg-white rounded-3 p-4 shadow-sm">
                                <div class="d-flex align-items-center gap-3 mb-3">
                                    <div class="rounded-circle d-flex align-items-center justify-content-center fw-semibold" 
                                         style="width: 40px; height: 40px; background-color: #305C7D; color: white; font-size: 1.1rem;">
                                        @(review.ClientNom?.Substring(0, 1).ToUpper() ?? "A")
                                    </div>
                                    <div>
                                        <p class="fw-semibold mb-0" style="color: #2d3748;">
                                            @(review.ClientNom ?? "Client anonyme")
                                        </p>
                                        <p class="small text-muted mb-0">
                                            @review.DateAvis.ToString("dd MMMM yyyy", new System.Globalization.CultureInfo("fr-FR"))
                                        </p>
                                    </div>
                                </div>
                                <div class="d-flex gap-1 mb-3">
                                    @for (int i = 0; i < 5; i++)
                                    {
                                        if (i < review.Note)
                                        {
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#ffc107" viewBox="0 0 16 16">
                                                <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
                                            </svg>
                                        }
                                        else
                                        {
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#e0e0e0" viewBox="0 0 16 16">
                                                <path d="M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z"/>
                                            </svg>
                                        }
                                    }
                                </div>
                                @if (!string.IsNullOrEmpty(review.Commentaire))
                                {
                                    <p class="text-muted mb-0" style="line-height: 1.6;">
                                        @review.Commentaire
                                    </p>
                                }
                            </div>
                        </div>
                    }
                </div>
            </section>
        }
        else
        {
            <section class="mt-5 pt-5 border-top">
                <h2 class="h3 fw-bold mb-4" style="color: #2d3748;">Avis clients</h2>
                <p class="text-muted">Aucun avis pour ce produit pour le moment.</p>
            </section>
        }

        <!-- Related Products -->
        @if (produitsSimilaires.Any())
        {
            <section class="mt-5 pt-5 border-top">
                <h2 class="h3 fw-bold mb-4" style="color: #2d3748;">Produits similaires</h2>
                <div class="row g-4">
                    @foreach (var similarProduct in produitsSimilaires)
                    {
                        <div class="col-sm-6 col-lg-3">
                            @Html.Partial("_ProductCard", similarProduct)
                        </div>
                    }
                </div>
            </section>
        }
    </div>
</main>

<!-- Image Modal -->
<div class="modal fade" id="imageModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content bg-transparent border-0">
            <button type="button" class="btn-close btn-close-white position-absolute top-0 end-0 m-3" data-bs-dismiss="modal" aria-label="Close" style="z-index: 10;"></button>
            <img id="modal-image" src="" alt="" class="w-100 rounded">
        </div>
    </div>
</div>

@Html.Partial("_Footer")

@section scripts {
    <script>
        let currentQuantity = 1;
        let selectedVariantId = @(baseVariant != null ? baseVariant.VarianteId.ToString() : "null");
        let selectedVariantPrice = @(baseVariant != null ? (produit.PrixTTC + baseVariant.PrixSupplementaireTTC).ToString("F2", System.Globalization.CultureInfo.InvariantCulture) : produit.PrixTTC.ToString("F2", System.Globalization.CultureInfo.InvariantCulture));
        let selectedVariantStock = @(baseVariant != null ? baseVariant.Stock : (variantes.Any() ? variantes.First().Stock : produit.StockTotal));
        const basePrice = @produit.PrixTTC.ToString("F2", System.Globalization.CultureInfo.InvariantCulture);
        const productId = @produit.ProduitId;

        function changeMainImage(imageSrc, element) {
            document.getElementById('main-product-image').src = imageSrc;
            // Update active thumbnail
            document.querySelectorAll('.thumbnail-image').forEach(thumb => {
                thumb.style.borderColor = 'transparent';
            });
            if (element) {
                element.style.borderColor = '#305C7D';
            }
        }

        function openImageModal(imageSrc) {
            document.getElementById('modal-image').src = imageSrc;
            const modal = new bootstrap.Modal(document.getElementById('imageModal'));
            modal.show();
        }

        function selectVariant(button, variantId, price, stock) {
            const numericPrice = typeof price === 'string' ? parseFloat(price) : price;
            selectedVariantId = variantId;
            selectedVariantPrice = numericPrice;
            selectedVariantStock = stock;
            
            // Update UI
            document.querySelectorAll('.variant-btn').forEach(btn => {
                btn.classList.remove('active');
                btn.style.borderColor = '#e0e0e0';
                btn.style.backgroundColor = 'white';
            });
            button.classList.add('active');
            button.style.borderColor = '#C06C50';
            button.style.backgroundColor = '#F5F3EF';
            
            // Update price
            document.getElementById('product-price').textContent = numericPrice.toFixed(2);
            
            // Update stock
            document.getElementById('stock-info').textContent = stock + ' en stock';
            
            // Update quantity max
            if (currentQuantity > stock) {
                currentQuantity = stock;
                updateQuantityDisplay();
            }
            updateQuantityButtons();
        }

        function increaseQuantity() {
            if (currentQuantity < selectedVariantStock) {
                currentQuantity++;
                updateQuantityDisplay();
                updateQuantityButtons();
            }
        }

        function decreaseQuantity() {
            if (currentQuantity > 1) {
                currentQuantity--;
                updateQuantityDisplay();
                updateQuantityButtons();
            }
        }

        function updateQuantityDisplay() {
            document.getElementById('quantity-display').textContent = currentQuantity;
        }

        function updateQuantityButtons() {
            const decreaseBtn = document.getElementById('decrease-btn');
            const increaseBtn = document.getElementById('increase-btn');
            
            decreaseBtn.disabled = currentQuantity <= 1;
            increaseBtn.disabled = currentQuantity >= selectedVariantStock;
        }

        function addToCart() {
            if (!window.isUserAuthenticated()) {
                const currentUrl = window.location.pathname + window.location.search;
                const separator = currentUrl.includes('?') ? '&' : '?';
                let returnUrl = currentUrl + separator + 'addItem=' + productId;
                if (selectedVariantId) returnUrl += '&addVariant=' + selectedVariantId;
                if (currentQuantity > 1) returnUrl += '&addQty=' + currentQuantity;
                
                window.location.href = '/Account/Login?returnUrl=' + encodeURIComponent(returnUrl);
                return;
            }
            
            window.addProductToCart(String(productId), currentQuantity, selectedVariantId);
            window.showNotification(currentQuantity + ' x @produit.Nom ajouté au panier', 'success');
            window.updateCartBadge();
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            updateQuantityButtons();
            if (document.querySelectorAll('.thumbnail-image').length > 0) {
                document.querySelectorAll('.thumbnail-image')[0].style.borderColor = '#305C7D';
            }
        });
    </script>
}

<style>
    .thumbnail-image:hover {
        border-color: #305C7D !important;
    }
    
    .variant-btn:hover:not(.active) {
        border-color: #C06C50 !important;
    }
    
    .variant-btn.active {
        border-color: #C06C50 !important;
        background-color: #F5F3EF !important;
    }
    
    #imageModal .modal-content {
        background: rgba(0, 0, 0, 0.9);
    }
</style>

