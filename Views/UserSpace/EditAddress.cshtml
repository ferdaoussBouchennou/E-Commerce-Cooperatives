@model E_Commerce_Cooperatives.Models.ViewModels.AddressViewModel
@{
    ViewBag.Title = "Modifier une adresse";
    Layout = "~/Views/UserSpace/_UserSpaceLayout.cshtml";
}

<div class="card shadow-sm" style="border-radius: 12px; border: none;">
    <div class="card-header" style="background: linear-gradient(135deg, #305C7D 0%, #4C7089 100%); color: white; border-radius: 12px 12px 0 0; padding: 1.5rem;">
        <h4 class="mb-0">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 16 16" style="margin-right: 10px;">
                <path d="M12.854.146a.5.5 0 0 0-.707 0L10.5 1.793 14.207 5.5l1.647-1.646a.5.5 0 0 0 0-.708l-3-3zm.646 6.061L9.793 2.5 3.293 9H3.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.207l6.5-6.5zm-7.468 7.468A.5.5 0 0 1 6 13.5V13h-.5a.5.5 0 0 1-.5-.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.5-.5V10h-.5a.499.499 0 0 1-.175-.032l-.179.178a.5.5 0 0 0-.11.168l-2 5a.5.5 0 0 0 .65.65l5-2a.5.5 0 0 0 .168-.11l.178-.178z"/>
            </svg>
            Modifier une adresse
        </h4>
    </div>
    <div class="card-body p-4">
        @using (Html.BeginForm("EditAddress", "UserSpace", FormMethod.Post, new { @class = "needs-validation", novalidate = "novalidate" }))
        {
            @Html.AntiForgeryToken()
            @Html.HiddenFor(m => m.AdresseId)

            <div class="form-group mb-3">
                @Html.LabelFor(m => m.AdresseComplete, new { @class = "form-label fw-bold", style = "color: #305C7D;" })
                @Html.TextAreaFor(m => m.AdresseComplete, new { @class = "form-control", rows = "3", required = "required", placeholder = "Ex: 123 Rue Example, Appartement 4B" })
                @Html.ValidationMessageFor(m => m.AdresseComplete, "", new { @class = "text-danger" })
            </div>

            <div class="row mb-3">
                <div class="col-md-6">
                    <div class="form-group">
                        @Html.LabelFor(m => m.Ville, new { @class = "form-label fw-bold", style = "color: #305C7D;" })
                        @Html.TextBoxFor(m => m.Ville, new { @class = "form-control", required = "required", placeholder = "Ex: Casablanca" })
                        @Html.ValidationMessageFor(m => m.Ville, "", new { @class = "text-danger" })
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        @Html.LabelFor(m => m.CodePostal, new { @class = "form-label fw-bold", style = "color: #305C7D;" })
                        @Html.TextBoxFor(m => m.CodePostal, new { @class = "form-control", placeholder = "Ex: 20000" })
                        @Html.ValidationMessageFor(m => m.CodePostal, "", new { @class = "text-danger" })
                    </div>
                </div>
            </div>

            <div class="form-group mb-3">
                @Html.LabelFor(m => m.Pays, new { @class = "form-label fw-bold", style = "color: #305C7D;" })
                @Html.TextBoxFor(m => m.Pays, new { @class = "form-control", placeholder = "Ex: Maroc" })
                @Html.ValidationMessageFor(m => m.Pays, "", new { @class = "text-danger" })
            </div>

            <div class="form-check mb-4">
                @Html.CheckBoxFor(m => m.EstParDefaut, new { @class = "form-check-input" })
                @Html.LabelFor(m => m.EstParDefaut, "Définir comme adresse par défaut", new { @class = "form-check-label", style = "color: #305C7D;" })
            </div>

            <div class="d-flex justify-content-between mt-4">
                <a href="@Url.Action("Addresses", "UserSpace")" class="btn btn-outline-secondary" style="border-radius: 8px; padding: 0.75rem 2rem;">
                    Annuler
                </a>
                <button type="submit" class="btn" style="background-color: #305C7D; color: white; padding: 0.75rem 2rem; border-radius: 8px; font-weight: 600;">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" viewBox="0 0 16 16" style="margin-right: 8px;">
                        <path d="M12.854.146a.5.5 0 0 0-.707 0L10.5 1.793 14.207 5.5l1.647-1.646a.5.5 0 0 0 0-.708l-3-3zm.646 6.061L9.793 2.5 3.293 9H3.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.207l6.5-6.5zm-7.468 7.468A.5.5 0 0 1 6 13.5V13h-.5a.5.5 0 0 1-.5-.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.5-.5V10h-.5a.499.499 0 0 1-.175-.032l-.179.178a.5.5 0 0 0-.11.168l-2 5a.5.5 0 0 0 .65.65l5-2a.5.5 0 0 0 .168-.11l.178-.178z"/>
                    </svg>
                    Enregistrer les modifications
                </button>
            </div>
        }
    </div>
</div>

@section scripts {
    <script>
        (function() {
            'use strict';
            var forms = document.querySelectorAll('.needs-validation');
            Array.prototype.slice.call(forms).forEach(function(form) {
                form.addEventListener('submit', function(event) {
                    if (!form.checkValidity()) {
                        event.preventDefault();
                        event.stopPropagation();
                    }
                    form.classList.add('was-validated');
                }, false);
            });
        })();
    </script>
}

